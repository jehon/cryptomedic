<html>

<head>
    <meta charset="utf-8" />
</head>

<body>
    <link rel="stylesheet" type="text/css" href="../../node_modules/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../../app/css/application.css">
    <style>
        .flex {
            width: 100%;
            display: flex;
            flex-wrap: wrap;
        }

        .flex>* {
            width: 300px;
            height: 300px;
            border: dashed 1px blue;
        }

        [highlight] {
            background-color: gray;
            border: 1px solid green;
        }
    </style>

    TODO: put h2 into div flex
    TODO: reorganize widgets vs pages vs ... and alphabetically

    <h2>Widgets</h2>
    <div class='flex'>
        <x-panel>
            <h3>x-button</h3>
            <script type='module' src='../../app/elements/widgets/x-button.js'></script>
            <div>
                <x-button level='success'>primary</x-button>
                <x-button icon='error'>iconic</x-button>
            </div>
            <x-button level='default'>secondary</x-button>
            <x-button level='danger'>dangerous</x-button>
        </x-panel>
        <x-panel>
            <h3>x-message</h3>
            <script type='module' src='../../app/elements/widgets/x-message.js'></script>
            <x-message level='success'>primary</x-message>
            <x-message level='warning'>warning</x-message>
        </x-panel>
        <script>
            document.querySelectorAll('x-button').forEach(e => e.addEventListener('click', evt => console.info('clicked', evt.target)));
        </script>
    </div>

    <h2>X-Panel's</h2>
    <script type='module' src='../../app/elements/panels/x-panel.js'></script>
    <div class='flex'>
        <x-panel>
            <div>test</div>
        </x-panel>
    </div>

    <h2>X-Group-Panel's</h2>
    <script type='module' src='../../app/elements/panels/x-group-panel.js'></script>
    <script type='module' src='../../app/elements/widgets/x-fff-field.js'></script>
    <div class='flex'>
        <x-group-panel title='my title'>
            <div>test</div>
        </x-group-panel>
        <x-group-panel title='my title'>
            <table>
                <thead>
                    <tr>
                        <th>title 1</th>
                        <th>title 2</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>content 1</td>
                        <td>content 2</td>
                    </tr>
                </tbody>
            </table>
        </x-group-panel>
        <x-group-panel title='With fields'>
            <x-fff-field demo-folder='test1' file-uid='ricket-consult-13' field='test'>
                <span>hello</span>
            </x-fff-field>
            <x-fff-field demo-folder='test1' file-uid='ricket-consult-13' field='test2'>
                <span>hello2</span>
            </x-fff-field>
            <x-fff-field demo-folder='test1' file-uid='ricket-consult-13' field='test3'>
                <span>hello3</span>
            </x-fff-field>
        </x-group-panel>
    </div>

    <h2>X-Waiting's</h2>
    <script type='module' src='../../app/elements/panels/x-waiting.js'></script>
    <div class='flex'>
        <x-waiting>content free</x-waiting>
        <x-waiting blocked>content waiting</x-waiting>
    </div>

    <h2>X-Overlay's</h2>
    <script type='module' src='../../app/elements/panels/x-overlay.js'></script>
    <div class='flex'>
        <x-overlay>
            <div slot='content'>Content</div>
            <div slot='overlay'>Overlay</div>
        </x-overlay>
        <x-overlay blocked>
            <div slot='content'>Content</div>
            <div slot='overlay'>Overlay</div>
        </x-overlay>
        <x-overlay blocked closable>
            <div slot='content'>Content</div>
            <div slot='overlay'>Overlay</div>
        </x-overlay>
    </div>

    <h2>X-Requestor's</h2>
    <script type='module' src='../../app/elements/panels/x-requestor.js'></script>
    <div class='flex'>
        <x-requestor>
            <div slot>Content</div>
        </x-requestor>
        <x-requestor blocked fail>
            <div slot>Content</div>
        </x-requestor>
        <script type='module'>
            document
                .querySelectorAll('x-requestor[fail]').forEach(
                    e =>
                        e.request({ url: '/nothing' })
                            // Avoid it to appear in logs
                            .catch(() => { })
                );

        </script>
    </div>

    <h2>X-Messages</h2>
    <script type='module' src='../../app/elements/panels/x-messages.js'></script>
    <div class='flex'>
        <x-messages></x-messages>
        <script type='module'>
            document.querySelectorAll('x-messages').forEach(e => e.showMessages([
                "This is an error",
                { level: "warning", text: "This is a warning" }
            ]));
        </script>
    </div>

    <h2>x-input-date</h2>
    <script type='module' src='../../app/elements/x-input-date.js'></script>
    <div class='flex'>
        <x-input-date></x-input-date>
        <x-input-date value='01-02-2020'></x-input-date>
    </div>

    <h1>Folder related</h1>
    <h2>x-graphics</h2>
    <script type='module' src='../../app/elements/widgets/x-graphic-height.js'></script>
    <script type='module' src='../../app/elements/widgets/x-graphic-weight.js'></script>
    <script type='module' src='../../app/elements/widgets/x-graphic-bmi.js'></script>
    <script type='module' src='../../app/elements/widgets/x-graphic-wh.js'></script>
    <div class='flex'>
        <x-graphic-height demo-folder='test1'></x-graphic-height>
        <x-graphic-weight demo-folder='test1'></x-graphic-weight>
        <x-graphic-bmi demo-folder='test1'></x-graphic-bmi>
        <x-graphic-wh demo-folder='test1'></x-graphic-wh>
    </div>

    <h2>Patient related</h2>
    <script type='module' src='../../app/elements/widgets/x-ff-patient-related.js'></script>
    <div class=' flex'>
        <x-ff-patient-related demo-folder='test1'></x-ff-patient-related>
    </div>

    <script type='module'>
        import Folder from '../../app/models/Folder.js';

        fetch('../../www/api/v1.3/tests/references/FolderTest.test1.json')
            .then(response => response.json())
            .then(data => new Folder(data.folder))
            .then(folder => {
                document.querySelectorAll('[demo-folder="test1"]').forEach(el => {
                    el.folder = folder;
                    el.querySelectorAll('[with-folder]')
                        .forEach(el => el.folder = folder)
                })
            });
    </script>
</body>

</html>