<html>
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <title>Cryptomedic local dev</title>
    <style>
      body {
        display: flex;
        flex-wrap: wrap;
      }

      body > * {
        width: 30%;
        border: 1px solid black;
        margin: 5px;
        padding: 15px;
      }

      a {
        margin: 10px;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        border: 1px solid gray;
      }

      table td,
      table th {
        padding: 5px;
        border: 1px solid gray;
      }

      table.prod_test > tbody > tr > td:nth-child(1),
      [prod] {
        background-color: lightcoral;
      }

      table.prod_test > tbody > tr > td:nth-child(2),
      [dev] {
        background-color: lightgreen;
      }

      table > tbody > tr[action] > td::before {
        content: "!!action!!";
      }
    </style>
  </head>

  <body>
    <div>
      <x-dev-prod></x-dev-prod>
      <x-dev-prod title="Server" url="/"></x-dev-prod>
      <x-dev-prod
        title="phpmyadmin"
        url="/phpmyadmin/"
        remote-url="https://phpmyadmin.cluster003.hosting.ovh.net/index.php?pma_username=cryptomekpmain&pma_servername=cryptomekpmain.mysql.db"
      ></x-dev-prod>
      <x-dev-prod
        title="Manager"
        url=""
        remote-url="https://www.ovh.com/manager/"
      ></x-dev-prod>
      <x-dev-prod
        title="FTP Explorer"
        url=""
        remote-url="https://net2ftp.cluster003.hosting.ovh.net/"
      ></x-dev-prod>
      <x-dev-prod title="browsers stats" url="/api/browsers/stats"></x-dev-prod>
      <x-dev-prod
        action
        title="patch db"
        url="/maintenance/patch_db.php?pwd=secret"
      ></x-dev-prod>
      <x-dev-prod
        action
        title="Create db backup"
        url="/maintenance/create_db_backup.php?pwd=secret"
      ></x-dev-prod>
      <x-dev-prod
        action
        title="browsers clean"
        url="/api/browsers/clean"
      ></x-dev-prod>
      <x-dev-prod
        action
        title="reset (cache/...)"
        url="/maintenance/reset.php?env=dev&pwd=secret"
      ></x-dev-prod>
      <x-dev-prod
        action
        title="md5sum"
        url="/maintenance/md5sum.php?filter=local"
        remote-url="/maintenance/md5sum.php?filter=remote"
      ></x-dev-prod>
      <x-dev-prod
        title="checkFileSystem"
        url="/api/admin/pictures/checkFileSystem"
      ></x-dev-prod>
    </div>
    <div>
      <h3>@2023-07</h3>
      <pre>
        minimum mobile screen = 360*800 (bootstrap: xs)
        minimum desktop screen = 1366*768 (bootstrap: xl)
        ==> cutting at "lg" (992px)
      </pre>
    </div>
    <div dev>
      <h2>Development environment</h2>
      <ul>
        <li>
          <a href="/dev/tests/demo/demo.html">Demo</a>
        </li>
        <li>
          <a
            href="https://github.com/jehon/cryptomedic/actions/workflows/test.yml"
            >Github actions</a
          >
        </li>
        <li>
          <a href="/dev/tests/styles/index.html">Style_comparison</a>
        </li>
        <li>
          <a href="http://localhost:8089/">Traefik</a>
        </li>
      </ul>
      <h2>Tests results</h2>
      <ul>
        <li><a href="/mail/">MailHog</a></li>
        <li><a href="/dev/tmp/frontend/junit/">JUnit</a></li>
        <li>
          <a href="/dev/tmp/jfrontend/lcov-report/index.html">Coverage</a>
        </li>
        <li>
          <a href="/dev/tmp/backend/reports/index.html">Coverage_php_laravel</a>
        </li>
      </ul>
    </div>
    <div>
      <h2>E2E: tests/e2e/tests/ro/readPatientTest.js</h2>
      <ul>
        <li>
          readPatient2000
          <ul>
            <li><a href="/built/ng1x.html#/folder/1">patient 2000-1</a></li>
            <li>
              <a href="/built/ng1x.html#/folder/1/file/RicketConsult/13"
                >ricket consult 13</a
              >
            </li>
            <li>
              <a href="/built/ng1x.html#/folder/1/file/Appointment/2"
                >appointment 2</a
              >
            </li>
            <li>
              <a href="/built/ng1x.html#/folder/1/file/Surgery/5">surgery 5</a>
            </li>
          </ul>
        </li>

        <li>
          readPatient5
          <ul>
            <li><a href="/built/ng1x.html#/folder/5">patient 2014-105</a></li>
            <li>
              <a href="/built/ng1x.html#/folder/5/file/ClubFoot/1"
                >club foot 1</a
              >
            </li>
          </ul>
        </li>

        <li>
          readPatient6
          <ul>
            <li><a href="/built/ng1x.html#/folder/6">patient 2001-1</a></li>
          </ul>
        </li>

        <li>
          readPatient3
          <ul>
            <li><a href="/built/ng1x.html#/folder/3">patient 2014-103</a></li>
          </ul>
        </li>
      </ul>
    </div>

    <div>
      <h2>E2E: tests/e2e/tests/modifyPatientTest.js</h2>
      <div><a href="/built/ng1x.html#/folder/7">patient 2001-4</a></div>
    </div>

    <div>
      <h2>E2E: reports</h2>
      <div>
        <a href="/built/ng1x.html#/reports/activity">activity</a>
        <ul>
          <li>month: 2014-05</li>
          <li>daily: 2014-05-20</li>
        </ul>
      </div>
      <div>
        <a href="/built/ng1x.html#/reports/surgical">surgical</a>
        <ul>
          <li>month: 2014-01</li>
        </ul>
      </div>
      <div>
        <a href="/built/ng1x.html#/reports/consultations">consultations</a>
        <ul>
          <li>day: 2015-04-28</li>
        </ul>
      </div>
      <div>
        <a href="/built/ng1x.html#/reports/statistical">statistical</a>
        <ul>
          <li>month: 2014-05</li>
        </ul>
      </div>
    </div>
    <script type="module">
      class XDevProd extends HTMLElement {
        connectedCallback() {
          const title = this.getAttribute("title");
          const url = this.getAttribute("url") ?? "";
          let remoteUrl = this.getAttribute("remote-url") ?? url;
          if (remoteUrl[0] == "/") {
            remoteUrl = "http://www.cryptomedic.org" + remoteUrl;
          }

          this.attachShadow({ mode: "open" });

          this.shadowRoot.innerHTML = `
        <style>
            :host(*) {
                display: flex;
                flex-direction: row;
                width: 100%;
            }

            :host([action]) > *::before {
                display: inline-block;
                content: "";
                background: no-repeat left/1em url("https://upload.wikimedia.org/wikipedia/commons/9/92/Caution_sign_used_on_roads_pn.svg");
                height: 100%;
                width: 1em;
                margin-right: 1em;
            }

            * {
                flex-grow:  1;
                flex-basis: 10px;
                padding:    5px;
                text-align: center;
            }

            .prod {
                background-color: lightcoral;
            }

            .dev {
                background-color: lightgreen;
            }

            a[href=''] {
                text-decoration: none;
                color: black;
            }
        </style>
        <a class='prod' href='${remoteUrl}'>${title ?? "Production"}</a>
        <a class='dev' href='${url}'>${title ?? "Development"}</a>
    `;
        }
      }

      customElements.define("x-dev-prod", XDevProd);
    </script>
  </body>
</html>
