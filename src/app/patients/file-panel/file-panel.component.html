<div class="panel">
  <div data-uid="123" (click)="toggleOpen()">
    <label>
      <img src="{{ icon }}" alt="{{ model }}" class="inline" />
      {{ label }}
    </label>
    <ng-content select="[headers]"></ng-content>
  </div>
  @if (statusOpened) {
    <div class="body">
      <div class="technical">
        <div>{{ model }}#{{ file.id }}</div>
        <div>created at <app-date [value]="file.created_at"></app-date></div>
        <div>updated at <app-date [value]="file.updated_at"></app-date></div>
        <div>by {{ file.last_user }}</div>
      </div>
      <div class="button-group">
        @if (file.isLocked()) {
          @if (authService.has("folder.unlock")) {
            <button class="btn btn-outline-secondary" (click)="doUnlock()">
              Unlock
            </button>
          } @else {
            <span>File is locked</span>
          }
        } @else {
          @if (editMode) {
            <button class="btn btn-success" (click)="doSave()">Save</button>
            <button class="btn btn-warning" (click)="doCancel()">Cancel</button>
            <button
              *ngIf="authService.has('folder.delete')"
              class="btn btn-danger"
              (click)="doDelete()"
            >
              Delete
            </button>
            <app-confirm></app-confirm>
          } @else {
            <button
              *ngIf="authService.has('folder.edit')"
              class="btn btn-outline-primary"
              (click)="goEdit()"
            >
              Edit
            </button>
          }
        }
      </div>
      <div data-role="body" class="body">
        <ng-content></ng-content>
      </div>
    </div>
  }
</div>
